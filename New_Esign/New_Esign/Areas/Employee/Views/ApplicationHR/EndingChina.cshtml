@model New_Esign.Areas.Employee.Models.FORM_IT_01Model
@using New_Esign.Common;
@using New_Esign.AppCode;
@using System.Data;
@using System.Data.SqlClient;


@{
    ViewBag.Title = "EndingChina";
    Layout = "~/Areas/Employee/Views/Shared/Layout_khang.cshtml";
}
<style type="text/css">
    .boder-top {
        border: 1px solid #eaeeef;
        margin-left: 0px;
        padding: 10px;
        border-radius: 5px;
        border-top-left-radius: 0px;
    }

    .row-line {
        margin-left: 0px;
        padding: 10px;
    }

    .label-in {
        margin-bottom: 0px;
        color: black;
        font-weight: 500;
        margin-top: 20px;
    }

    i {
        color: #ffffff;
        font-size: 16px;
        font-weight: bold;
    }
</style>

@{ 
    string strQuery = @"select * from SubmitSign where FormID = '34' order by SignNo asc";

    SQLServerDBHelper db = new SQLServerDBHelper("EsignDB");
    DataTable tb = new DataTable();
    tb = db.DoSQLSelect(strQuery);
}

<div class="card" >
    <div class="container" style="padding: 0px; padding-top: 10px;">
        @using (Html.BeginForm("EndingChina", "ApplicationHR", new { area = "Employee" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
        {


            <div class="card-header" style="background-color: white; padding: 15px;">
                <strong class="card-title" style="width: 100%; text-align: center; font-size: 16px; color: black; font-family: arial; font-weight: 500; margin: 0px;">
                    出差越南中幹期滿返鄉申請單 <br />
                    ĐƠN XIN KẾT THÚC CÔNG TÁC VỀ NƯỚC CÁN BỘ TRUNG QUỐC
                </strong>
            </div>
            <div class="card-body " >
                @*Thông tin cá nhân*@
                <label class="label label-in" style="background-color: #5cb85c;">
                    <i class="metismenu-icon pe-7s-users"></i>
                    個人信息 Thông tin cá nhân
                </label>
                <div class="row boder-top formEnter">
                    <div class="row row-line col-12">
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                工號 Mã nhân viên
                            </label>
                            <input name="empID" id="empID" class="form-control" type="text">
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">中文姓名 Họ tên</label>
                            <input name="empName" id="empName" class="form-control" type="text" readonly>
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                護照拼音姓名 Tên phiên âm
                            </label>
                            <input name="Title0" class="form-control" type="text">
                        </div>
                    </div>
                    <div class="row row-line col-12">
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                職稱 Chức vụ
                            </label>
                            <input class="form-control" type="text" name="Title1" id="Title1" readonly>
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                資位 Cấp bậc
                            </label>
                            <input class="form-control" type="text" name="Title2" id="Title2" readonly>
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                單位 Bộ phận
                            </label>
                            <input class="form-control" type="text" name="Title3" id="Title3" readonly>
                        </div>
                    </div>
                    <div class="row row-line col-12">
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">事業群 Chi nhánh</label>
                            <input class="form-control" type="text" name="Title4">
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                處(室) BU
                            </label>
                            <input class="form-control" type="text" name="Title5">
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                部 Đơn vị
                            </label>
                            <input class="form-control" type="text" name="Title6">
                        </div>
                    </div>
                    <div class="row row-line col-12">
                        
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                               Mail
                            </label>
                            <input class="form-control" type="text" name="Title10Example" id="Title10Example">
                        </div>
                        
                    </div>
                </div>
                @*Thoi gian cong tac lan nay*@
                <label class="label label-in" style="background-color: #c3e0b1;">
                    <i class="metismenu-icon pe-7s-ticket"></i>
                    本次出差期間 Thời gian công tác lần này
                </label>
                <div class="row boder-top formEnter">
                    <div class="row row-line col-12">
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                入境日期 Ngày nhập cảnh
                            </label>
                            <input id="Title7" class="form-control datepicker" type="date" name="Title7">
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                出境日期 Ngày xuất cảnh
                            </label>
                            <input id="Title8" class="form-control datepicker" type="date" name="Title8">
                        </div>
                        <div class="form-group col-md-3 col-sm-12">
                            <label class="control-label mb-1">
                                日 Ngày
                            </label>
                            <input id="Title9" class="form-control"  type="number" step="any" name="Title9">
                        </div>
                    </div>

                </div>
                @*hành trình*@
                <label class="label label-in" style="background-color: #68b8ec;">
                    <i class="metismenu-icon pe-7s-flag"></i>
                    行程排配 Hành trình
                </label>
                <div class="row boder-top formEnter" style="padding:0px;">
                    <div class="row row-line col-lg-12 col-md-12 col-sm-12" style="padding:0px;margin-right:0px;">
                        <div class="card col-12" style="padding:0px;">
                            <div class="card-header" style="background-color:#b8f1e8">
                                <strong style="text-align: center; width: 100%; color: black;">
                                    返國 Về nước
                                </strong>
                            </div>
                            <div class="card-body card-block">
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title10">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title11Example">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title11">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title12">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title13">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title14">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title15">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title12Example">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title16">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title17">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện<br />
                                        </label>
                                        <input class="form-control" type="text" name="Title18">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title19">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title20">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title13Example">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title21">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title22">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title23">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" name="Title24" type="text">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title27">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title28">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title29">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title30">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title31">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title32">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title33">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title34">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title35">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title36">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title37">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title38">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row row-line col-lg-12 col-md-12 col-sm-12" style="padding:0px;">
                        <div class="card col-12" style="padding:0px;">
                            <div class="card-header" style="background-color:cornsilk;">
                                <strong style="text-align: center; width: 100%; color: black;">
                                    返出差地 Quay lại nơi công tác
                                </strong>
                            </div>
                            <div class="card-body card-block">
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi  <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title0Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title14Example">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về  <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title1Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title2Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title3Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" name="Title4Content" type="text">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi  <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title5Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title15Example">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title6Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title7Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title8Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" name="Title9Content" type="text">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi  <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title10Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title16Example">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về  <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title11Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title12Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title13Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" name="Title14Content" type="text">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title27Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title28Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về  <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title29Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title30Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title31Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" name="Title32Content" type="text">
                                    </div>
                                </div>
                                <div class="row form-group col-12">
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            去程 Đi <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title33Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title34Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            回 Về <br />&nbsp;
                                        </label>
                                        <input class="form-control" type="text" name="Title35Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            月Tháng / 日Ngày<br />&nbsp;
                                        </label>
                                        <input class="form-control" type="date" name="Title36Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            航班Chuyến/交通Phương tiện
                                        </label>
                                        <input class="form-control" type="text" name="Title37Content">
                                    </div>
                                    <div class="form-group col-md-2 col-sm-12">
                                        <label class="control-label mb-1">
                                            起訖時間 Thời gian<br />&nbsp;
                                        </label>
                                        <input class="form-control" name="Title38Content" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @*Thoi gian ve nuoc nghi lam viec*@
                <label class="label label-in" style="background-color:#b8f1e8;margin-left: 20px; margin-right: 20px;">
                    述職休假安排 Sắp xếp về nước nghỉ/ làm việc
                </label>
                <div class="card-body" style="margin-left: 20px; margin-right: 20px;">
                    <div class="card-header" style="background-color:cornsilk;">
                        <strong style="text-align: center; width: 100%; color: black;">
                            休假聯絡電話/ 地址/ 述職對象、項目<br />
                            Điện thoại/Địa chỉ liên hệ khi nghỉ/Đối tượng, hạng mục khi về nước làm việc
                        </strong>
                    </div>
                    <div class="row row-line col-12 form-group">
                        <textarea class="form-control col-12 texAre" rows="10" name="Title0Example"></textarea>
                    </div>
                </div>
                @*Thoi gian cong tac lan sau*@
                <label class="label label-in" style="background-color: #c3e0b1;">
                    <i class="metismenu-icon pe-7s-ticket"></i>
                    下次出差時間 Thời gian công tác lần sau
                </label>
                <div class="row boder-top formEnter">
                    <div class="row row-line col-12">
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                入境日期 Ngày nhập cảnh
                            </label>
                            <input id="Title15Content" class="form-control" type="date" name="Title15Content">
                        </div>
                        <div class="form-group col-md-4 col-sm-12">
                            <label class="control-label mb-1">
                                出境日期 Ngày xuất cảnh
                            </label>
                            <input id="Title16Content" class="form-control" type="date" name="Title16Content">
                        </div>
                        <div class="form-group col-md-3 col-sm-12">
                            <label class="control-label mb-1">
                                日 Ngày
                            </label>
                            <input id="Title17Content" class="form-control" type="number" step="any" name="Title17Content">
                        </div>
                    </div>
                </div>

                @*Bàn giao công việc*@
                <label class="label label-in" style="background-color: #9e7ce6;">
                    <i class="metismenu-icon pe-7s-compass icon_ct"></i>
                    返國前工作交接事項說明 Bàn giao công việc trước khi về nước
                </label>
                <div class="row boder-top card-body">
                    <div class="row row-line col-12">
                        <textarea class="form-control col-12 texAre" rows="4" line="5" name="Title18Content"></textarea>
                    </div>
                    <div class="row row-line col-12 formEnter">
                        <div class="col-md-8"></div>
                        <div class="form-group col-md-4">
                            <label class="control-label">工作職務代理人 Người thay thế： </label>
                            <input class="form-control" type="text" name="Title19Content" />
                        </div>
                    </div>
                </div>

                <label class="label label-in label-danger" style="background-color:#b8f1e8"><span class="text-danger font-weight-bold">說明Thuyết minh：</span> <br /></label>
                <div class="row boder-top">
                    <div class="row row-line col-12">
                        <label>
                            1.休假/述職安排請依照先後順序列出Ký đơn về nước nghỉ/làm việc theo lưu trình ký dưới đây
                            <br />
                            2.作業流程 Lưu trình ký：
                            <br />
                            申請人Người làm đơn --> 越南單位主管部/處級審核 Chủ quản cấp bộ/BU tại VN-->越南人資窗口Chấm công VNHR-->越南人資主管 Chủ quản VNHR -->越南最高主管Chủ quản cao nhất xưởng VN-->所屬廠區人資窗口 Chấm công HR xưởng TQ
                        </label>
                    </div>
                </div>
                <label class="label label-in label-group-info text-primary">作業流程 Lưu trình ký</label>
                <div class="row boder-top formEnter">
                    <div class="row row-line col-12">
                        <table class="table" id="myTable">
                            <thead>
                                <tr>
                                    <th>簽核類型 / Loại hình ký</th>
                                    <th>簽核工號 / Mã thẻ người ký</th>
                                    <th>簽核人 / Người phê duyệt</th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (int i = 0; i < tb.Rows.Count; i++)
                                {
                                <tr>
                                    <td>
                                        <select name="position[]" class="gender my_select_sign btn-block"><option value="@tb.Rows[i]["SignName"].ToString()">@tb.Rows[i]["SignName"].ToString()</option></select>
                                        @*<input class="btn-block" type="text" name="position[]" value="@Model.approvalApps[i].statusName" />*@
                                    </td>
                                    @{
                                        if (i == 0)
                                        {
                                            <td><input class="btn-block nextNo" type="text" name="pno[]" id="empSubmit" readonly/></td>
                                            <td><input class="btn-block" type="text" name="pname[]" readonly id="nameSubmit"/></td>
                                        }
                                        else
                                        {
                                            <td><input class="btn-block nextNo" type="text" name="pno[]" /></td>
                                            <td><input class="btn-block" type="text" name="pname[]" readonly /></td>
                                        }

                                    }
                                    <td><input type="button" value="@LanguageHelper.GetResource("Admin.Approver.Title.Add")" onclick="myCreate(this)" /></td>
                                </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                </div>
                <div class="row formEnter" style="margin:10px;" >
                    <button type="button" style="margin:auto;" class="btn col-2 btn-secondary"><i class="fa fa-backward"></i>&nbsp; 呈單 Xóa bỏ</button>
                    <button type="button" style="margin:auto;" id="subEnter" class="btn col-2 btn-success" onclick="sbApplication()"><i class="fa fa-magic"></i>&nbsp; @LanguageHelper.GetResource("yellow.submit")</button>
                    
                        <input type="submit" value="submit_ok" class="btn btn-outline-success col-sm-2 col-md-2 col-lg-2" id="submit" name="submit" style="display: none;" />
                    
                </div>
            </div>
            
            //lay thong tin nguoi ky
            <input type="hidden" class="form-control" name="Title1Example" id="Title1Example" />
            <input type="hidden" class="form-control" name="Title2Example" id="Title2Example" />
            <input type="hidden" class="form-control" name="Title3Example" id="Title3Example" />
        }
    </div>
</div>
<script type="text/javascript">

    $(document).ready(function () {

        //if ($(".texAre").change()) {
        //    $(window).keydown(function (event) {
        //        if (event.keyCode == 13) {
        //            event.preventDefault();
        //            return true;
        //        }
        //    });
        //}
        //else {
        //    $(window).keydown(function (event) {
        //        if (event.keyCode == 13) {
        //            event.preventDefault();
        //            return false;
        //        }
        //    });
        //}
      

        $(function () {
            startRefresh();
            
        });      

        $("#empID").change(function () {
            var reg = $("#empID").val();
            //var reg = $("#UserID").val();
            //var json = { empNo: reg };
            $.ajax({
                type: "Get",
                url: 'https://appvn6.foxconn.com.vn:1236/api/hr/getEmpObj',
                contentType: "application/json; charset=utf-8",
                data: { id: reg },
                success: function (data) {
                    $("#empName").val(data.USER_NAME);
                    $("#Title3").val(data.DEPARTMENT_NAME);
                    $("#Title1").val(data.JOB_TITLE); 
                    $("#Title2").val(data.GRADE);
                    $("#Title10Example").val(data.NOTES_ID);
                    $("#empSubmit").val(data.USER_ID);
                    $("#nameSubmit").val(data.USER_NAME);
                },
                error: function (error) {

                    alert(error);
                },
            });
        });

        function startRefresh() {
            setTimeout(startRefresh, 1000);           
            
            var listInput = $("#myTable input[name='pno[]']");
            var listInputName = $("#myTable input[name='pname[]']");
            //var arrayTye = listNameInput;

            $.each(listInput, function (index, item) {
                item.onchange = function () {
                    var empNo = item.value;
                    var a = listInput.index(item);
                    var idName = "#nameSig" + a;
                    $.ajax({
                        type: "Get",
                        url: 'https://appvn6.foxconn.com.vn:1236/api/hr/getEmpObj',
                        contentType: "application/json; charset=utf-8",
                        data: { id: empNo },
                        success: function (data) {
                            var name = data.USER_NAME;
                            var dept = data.DEPARTMENT_NAME;
                            //$(idName).val(data.USER_NAME);
                            $(item).closest('td').next().find(":input[name='pname[]']").val(name);
                            $(item).closest('td').next().find(":input[name='pname[]']").closest('td').next().find(":input[name='pdept[]']").val(dept);
                        },
                        error: function (error) {

                            alert(error);
                        },
                    });
                }
            });

        };
    });

    $("#Title9").click(function () {
        var day1 = $('#Title7').val();
        var day2 = $('#Title8').val();

        if (day1 != '' && day2 != '') {
            if (new Date(day2) > new Date(day1)) {
                var startDay = new Date(day1);
                var endDay = new Date(day2);
                var millisecondsPerDay = 1000 * 60 * 60 * 24;

                var millisBetween = endDay.getTime() - startDay.getTime();
                var days = millisBetween / millisecondsPerDay;
                // Round down.
                //alert(Math.floor(days));
                $('#Title9').val(Math.floor(days))
            } else {
                alert('結束時間必要比開始時間長 Ngày nhập cảnh phải trước ngày xuất cảnh');
            }
        } else {
            alert('不可為空 Không được để trống');
        }
    });

    $("#Title17Content").click(function () {
        var day1 = $('#Title15Content').val();
        var day2 = $('#Title16Content').val();

        if (day1 != '' && day2 != '') {
            if (new Date(day2) > new Date(day1)) {
                var startDay = new Date(day1);
                var endDay = new Date(day2);
                var millisecondsPerDay = 1000 * 60 * 60 * 24;

                var millisBetween = endDay.getTime() - startDay.getTime();
                var days = millisBetween / millisecondsPerDay;
                // Round down.
                //alert(Math.floor(days));
                $('#Title17Content').val(Math.floor(days))
            } else {
                alert('結束時間必要比開始時間長 Ngày nhập cảnh phải trước ngày xuất cảnh');
            }
        } 
    });

    function myCreate(row) {
            var i = row.parentNode.parentNode.rowIndex;
            var table = document.getElementById("myTable");
            var row = table.insertRow(i + 1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            //var cell3 = row.insertCell(2);
            //var cell3 = row.insertCell(3);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);           

            cell1.innerHTML = '<td><select name="position[]" class="gender my_select_sign mySelect"><option value="課級主管審核 / Chủ quản cấp phòng">課級主管審核 / Chủ quản cấp phòng</option><option value="部級主管審核 / Chủ quản cấp bộ phận"> 部級主管審核 / Chủ quản cấp bộ phận</option><option value="處級主管審核 / Chủ quản cấp văn phòng sự nghiệp">處級主管審核 / Chủ quản cấp văn phòng sự nghiệp</option><option value="部級主管審核 / Chủ quản cấp bộ phận">部級主管審核 / Chủ quản cấp bộ phận</option><option value="會簽單位 / Người kết án">會簽單位 / Người kết án</option></select></td>';

            cell2.innerHTML = '<td><input class="btn-block nextNo" type="text" name="pno[]" /></td>';
            cell3.innerHTML = '<td><input class="btn-block" type="text" name="pname[]"  id="nameSig"/></td>';
            cell4.innerHTML = '<td><input type="button" value="@LanguageHelper.GetResource("Admin.Approver.Title.Add")" onclick="myCreate(this)" /></td>';
            cell5.innerHTML = '<td><input type="button" value="@LanguageHelper.GetResource("Admin.DeleteConfirm")" onclick="deleteRow(this)"/></td>';
            // myFunction();  
            
        }
    
        function deleteRow(btn) {
            var row = btn.parentNode.parentNode;
            row.parentNode.removeChild(row);
            //myFunction();
            n--;
        }

        //xac nhan trinh don
        function sbApplication() {
            var checkFlag = true;
            var values1 = $("input[name='pname[]']")
                .map(function () { return $(this).val(); }).get();
            $("#Title1Example").val(values1);
            var arrayValues1 = values1.toString().split(',');
            var filtered1 = arrayValues1.filter(Boolean);
            var values2 = $("input[name='pno[]']")
                .map(function () { return $(this).val(); }).get();
            $("#Title2Example").val(values2);
            var arrayValues2 = values2.toString().split(',');
            var filtered2 = arrayValues2.filter(Boolean);
            var values = $("select[name='position[]']")
                .map(function () { return $(this).val(); }).get();
            $("#Title3Example").val(values);
            var arrayValues = values.toString().split(',');
            var filtered = arrayValues.filter(Boolean);

            if (checkFlag == true) {
                if (filtered.length == filtered2.length && filtered.length == filtered1.length) {
                    $("#submit").click();
                }
                else {
                    confirm("請確認簽核流程！/ Vui lòng xác nhận lại lưu trình ký!");
                }
            }
            else { alert("無明確的錯誤 / Không có lỗi dõ dàng"); }
           // $("#submit").click();
        }

    //xu ly phim enter
    function keypressHandler(e) {
        if (e.which == 13) {
            e.preventDefault(); //stops default action: submitting form
            $(this).blur();
            //$('#subEnter').focus().click();//give your submit an ID
        }
    }

    $('.formEnter').keypress(keypressHandler);

</script>
